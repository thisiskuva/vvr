<html>
    <head>
        <title>VVR Test</title>
        <link rel='stylesheet' href='style.css'/>
    </head>
    <body>
        <div class='container'>
            <div class='cta'>Click</div>
        <div>
        <canvas id='video'></canvas>

        <script src="index.js"></script>

        <script>


            function getParam( name ){

                name = name.replace(/[\[]/,"\\\[").replace(/[\]]/,"\\\]");
                var regexS = "[\\?&]"+name+"=([^&#]*)";
                var regex = new RegExp( regexS );
                var results = regex.exec( window.location.href );
                if( results == null )
                    return null;
                else
                    return results[1];
            }

            var videourl = getParam( 'url' ) || 'https://streams.kolor.com/streams/e7bf77bb-77cc-47e6-92fa-dd8df9ec5851/source.05-2160p_4K_H264.mp4'

            console.log( 'Loading video:', videourl )

            var canvas = document.querySelector( 'canvas' )
            var player = vvr( canvas, videourl )

            var resize = function(){
                player.setSize( window.innerWidth, window.innerHeight )
            }


            window.onclick = function(){
                window.onclick = null
                document.querySelector('.cta').style.display = 'none'
                player.play()
            }

            resize()
            player.toggleMute()
            window.addEventListener( 'resize', resize )

        </script>
    </body>
<html>
